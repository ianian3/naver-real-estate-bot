# Tampermonkey 자동 업로드 기능

## 🔄 작동 방식

### 현재 개선된 방식: LocalStorage 기반 자동 감지

1. **사용자가 네이버 부동산에서 "💾 저장" 클릭**
   - 데이터가 LocalStorage에 저장됨
   - `pending_upload` 플래그 설정

2. **Streamlit 앱이 자동 감지**
   - 페이지 로드 시 LocalStorage 확인
   - 새로운 데이터 자동 업로드
   - 사용자에게 알림 표시

## 💡 왜 이 방식인가?

### 문제: 직접 HTTP 요청의 한계
- **CORS 문제**: 브라우저 보안 정책
- **Streamlit 제약**: 직접 POST 엔드포인트 없음
- **복잡한 설정**: 별도 백엔드 API 서버 필요

### 해결: LocalStorage 공유
- ✅ 같은 브라우저 내에서 데이터 공유
- ✅ CORS 문제 없음
- ✅ 간단한 구현
- ✅ 추가 서버 불필요

## 🎯 사용 방법

1. **네이버 부동산에서 데이터 저장**
   ```
   1. 아파트 페이지 방문
   2. "💾 저장" 버튼 클릭
   3. "✅ 저장 완료!" 메시지 확인
   ```

2. **Streamlit 앱 열기/새로고침**
   ```
   - http://localhost:8501 접속
   - 자동으로 새 데이터 감지
   - "🎉 새로운 데이터 업로드 완료!" 알림
   ```

## 🚀 향후 개선 방안

### Phase 2: Chrome Extension
- 백그라운드 스크립트로 완전 자동화
- 푸시 알림
- 여러 단지 동시 수집

### Phase 3: 전용 API 서버
- FastAPI 백엔드
- WebSocket 실시간 업데이트
- 모바일 앱 지원

## 🔧 트러블슈팅

### "자동 업로드가 안돼요"
1. 같은 브라우저 사용 확인
2. LocalStorage 초기화: 개발자 도구 > Application > Local Storage
3. Streamlit 앱 새로고침

### "데이터가 중복돼요"
- 정상입니다. 같은 단지는 자동으로 업데이트됩니다.
